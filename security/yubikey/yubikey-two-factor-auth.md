# Setting Up YubiKey for Two-Factor Authentication (2FA)

Enhance your security by using a **YubiKey** for two-factor authentication (2FA) with online services and local applications. This tutorial walks you through configuring your YubiKey for time-based OTP (TOTP) and other 2FA mechanisms.

---

## **Overview**

Two-factor authentication adds an additional layer of security by requiring:
1. Something you **know** (your password).
2. Something you **have** (your YubiKey).

The YubiKey can generate time-based one-time passwords (TOTP) or serve as a hardware-backed second factor for services like Google, GitHub, and more.

---

## **Prerequisites**

1. A **YubiKey** (YubiKey 5 or later recommended).
2. Installed tools:
   - `yubikey-manager` (manage your YubiKey).
   - `yubico-authenticator` (for OTP generation).

Install these tools on your Linux system:
```bash
sudo apt update
sudo apt install yubikey-manager yubioath-desktop
```

3. A compatible online service or app that supports 2FA.

---

## **Step 1: Configure YubiKey for OTP**

1. **Open YubiKey Manager**:
   Launch the manager to configure OTP slots:
   ```bash
   ykman otp
   ```

2. **Program an OTP Slot**:
   You can use either of the two OTP slots available on the YubiKey.

   To program Slot 2 for TOTP:
   ```bash
   ykman otp static --generate 2
   ```

   This generates a static password or OTP for services requiring a hardware-based second factor.

---

## **Step 2: Set Up Time-Based OTP (TOTP)**

1. **Install Yubico Authenticator**:
   Launch the Yubico Authenticator to manage TOTP:
   ```bash
   yubioath-desktop
   ```

2. **Add an Account**:
   - Open the Yubico Authenticator app.
   - Scan the QR code provided by the online service (e.g., Google, GitHub, AWS) or manually enter the secret key.

3. **Test the OTP**:
   - The authenticator will display a 6-digit code.
   - Enter this code when prompted by the service.

---

## **Step 3: Register YubiKey with Online Services**

### Example: Google Account
1. Log in to your Google account.
2. Navigate to **Security Settings** → **2-Step Verification**.
3. Click **Add Security Key** and follow the instructions to register your YubiKey.

### Example: GitHub
1. Log in to your GitHub account.
2. Navigate to **Settings** → **Security** → **Two-Factor Authentication**.
3. Choose **Security Key** and insert your YubiKey when prompted.

### Example: AWS Management Console
1. Navigate to **IAM** → **Users** → **MFA**.
2. Add a virtual MFA device and scan the QR code using Yubico Authenticator.

---

## **Step 4: Test Two-Factor Authentication**

1. Log out of the service you configured for 2FA.
2. Log back in using your username and password.
3. When prompted, either:
   - Press your YubiKey for OTP authentication.
   - Enter the TOTP generated by Yubico Authenticator.

---

## **Optional Enhancements**

### **1. Backup 2FA Codes**
Keep recovery codes provided by the service in a secure location (e.g., encrypted USB or password manager).

### **2. Use Multiple YubiKeys**
Register a backup YubiKey to avoid being locked out if your primary YubiKey is lost or damaged.

### **3. Secure the YubiKey**
Enable a PIN or physical touch requirement for additional security:
```bash
ykman otp set-touch --slot 2 on
```

---

## **Troubleshooting**

### **YubiKey Not Recognized**
- Ensure the YubiKey is properly connected:
  ```bash
  lsusb | grep Yubico
  ```

### **Unable to Generate OTP**
- Restart the Yubico Authenticator app.
- Ensure the system recognizes the YubiKey.

---

## **Conclusion**

By configuring your YubiKey for two-factor authentication, you significantly enhance the security of your online accounts and local applications. Its hardware-based protection ensures that only someone with physical access to your YubiKey can authenticate successfully.